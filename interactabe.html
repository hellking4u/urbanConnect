<html>

<body>

    <script src="https://js.leapmotion.com/leap-0.6.4.js"></script>
    <canvas id="displayArea" width="200" height="100" style="background:#dddddd;"></canvas>
    <script>
        var canvasElement = document.getElementById("displayArea");
        var displayArea = canvasElement.getContext("2d");

        var normalizedPosition = [0.4284399747848511, 0.5187681913375854, 1];
        var controller = new Leap.Controller();
        controller.on("frame", function (frame) {
            if (frame.pointables.length > 0) {
                canvasElement.width = canvasElement.width; //clear

                //Get a pointable and normalize the tip position
                var pointable = frame.pointables[0];
                var interactionBox = frame.interactionBox;

                // var normalizedPosition = interactionBox.normalizePoint(pointable.tipPosition, true);
                document.onkeypress = function (oPEvt) {
                    var oEvent = oPEvt || window.event, nChr = oEvent.charCode;
                    if (nChr == 99) {
                        console.log('calibrating');
                        normalizedPosition = interactionBox.normalizePoint(pointable.tipPosition, true);
                        console.log(pointable.tipPosition);
                    }
                }


                // Convert the normalized coordinates to span the canvas
                var canvasX = canvasElement.width * normalizedPosition[0];
                var canvasY = canvasElement.height * (1 - normalizedPosition[1]);
                //we can ignore z for a 2D context

                displayArea.strokeText("(" + canvasX.toFixed(1) + ", " + canvasY.toFixed(1) + ")", canvasX, canvasY);
            }
        });
        controller.connect();

        // document.onkeypress = function (oPEvt) {
        //     var oEvent = oPEvt || window.event, nChr = oEvent.charCode;
        //     if (nChr == 99) {

        //     }
        // }
    </script>
    <link href="/style.css">
</body>

</html>